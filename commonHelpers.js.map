{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst apiKey = '43901454-2f0f1ad212df2deb6dd93021b';\n\nlet currentPage = 1;\nlet perPage = 15;\n\nconst pixApi = async data => {\n  try {\n    const searchParams = new URLSearchParams({\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: currentPage,\n      per_page: perPage,\n    });\n\n    const response = await axios.get(\n      `https://pixabay.com/api/?key=${apiKey}&q=${data}&${searchParams}`\n    );\n\n    return response.data;\n  } catch (error) {\n    console.error('Помилка при отриманні даних', error);\n    throw error;\n  }\n};\n\nfunction setCurrentPage(page) {\n  currentPage = page;\n}\n\nfunction getCurrentPage() {\n  return currentPage;\n}\n\nexport { pixApi, currentPage, perPage, setCurrentPage, getCurrentPage };\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightbox = new SimpleLightbox('.card-link', {\n  inlineStyles: false,\n  captionsData: 'alt',\n  captionDelay: 250,\n  disableScroll: true,\n});\n\nconst renderImages = (resultData, list) => {\n  const markup = resultData\n    .map(\n      ({\n        largeImageURL,\n        likes,\n        comments,\n        views,\n        downloads,\n        tags,\n        webformatURL,\n      }) => {\n        return `<li class=\"card\">\n                <a class=\"card-link\" href=\"${largeImageURL}\">\n                    <img  class=\"card-image\" src=\"${webformatURL}\" alt=\"${tags}\" /> \n                </a>\n                <div class=\"main-content\">\n                    <ul class=\"card-list\">\n                        <li class=\"card-list-li\">\n                            <h3>\n                                likes\n                            </h3>\n                            <p>${likes}</p>\n                        </li>\n                        <li class=\"card-list-li\">\n                            <h3>\n                                views\n                            </h3>\n                            <p>${views}</p>\n                        </li>\n                        <li class=\"card-list-li\">\n                            <h3>\n                                comments\n                            </h3>\n                            <p>${comments}</p>\n                        </li>\n                        <li class=\"card-list-li\">\n                            <h3>\n                                downloads\n                            </h3>\n                            <p>${downloads}</p>\n                        </li>\n                    </ul>\n                </div>\n            </li>`;\n      }\n    )\n    .join('');\n\n  list.insertAdjacentHTML('beforeend', markup);\n\n  lightbox.refresh();\n};\n\nexport default renderImages;\n","import {\n  pixApi,\n  currentPage,\n  perPage,\n  setCurrentPage,\n  getCurrentPage,\n} from './js/pixabay-api.js';\nimport renderImages from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('form');\nconst input = document.querySelector('input[data-search]');\nconst loader = document.querySelector('.loader-div');\nconst list = document.querySelector('.list');\nconst moreBtn = document.querySelector('.show-more');\n\nlet searchRemember = '';\n\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n  loader.style.visibility = 'visible';\n\n  const search = input.value.trim();\n  list.innerHTML = '';\n\n  setCurrentPage(1);\n\n  try {\n    const data = await pixApi(search);\n    searchRemember = search;\n    const result = data.hits;\n    const totalPages = Math.ceil(data.totalHits / perPage);\n\n    if (result.length !== 0 && search !== '') {\n      renderImages(result, list);\n\n      totalPages > currentPage\n        ? (moreBtn.style.visibility = 'visible')\n        : (moreBtn.style.visibility = 'hidden');\n\n      console.log(totalPages - currentPage);\n    } else {\n      iziToast.show({\n        title: '❌',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        messageColor: 'white',\n        backgroundColor: '#E25757',\n        position: 'topRight',\n      });\n    }\n  } catch (error) {\n    console.error('Помилка при рендері картинок', error);\n    moreBtn.style.visibility = 'hidden';\n    iziToast.show({\n      title: '❌',\n      message: 'Sorry, check your internet connection!',\n      messageColor: 'white',\n      backgroundColor: '#E25757',\n      position: 'topRight',\n      timeout: 5000,\n    });\n  } finally {\n    loader.style.visibility = 'hidden';\n\n    e.target.reset();\n  }\n});\n\n//button more\nmoreBtn.addEventListener('click', async () => {\n  loader.style.visibility = 'visible';\n\n  setCurrentPage(getCurrentPage() + 1);\n\n  try {\n    const data = await pixApi(searchRemember);\n    const result = data.hits;\n    renderImages(result, list);\n    const totalPages = Math.ceil(data.totalHits / perPage);\n    console.log(totalPages - currentPage);\n    totalPages > currentPage\n      ? (moreBtn.style.visibility = 'visible')\n      : iziToast.show({\n          title: '❌',\n          message: \"We're sorry, but you've reached the end of search results.\",\n          messageColor: 'white',\n          backgroundColor: '#E25757',\n          position: 'topRight',\n          timeout: 5000,\n        });\n  } catch (error) {\n    console.error('Помилка при рендері картинок', error);\n\n    iziToast.show({\n      title: '❌',\n      message: 'Sorry, check your internet connection!',\n      messageColor: 'white',\n      backgroundColor: '#E25757',\n      position: 'topRight',\n      timeout: 5000,\n    });\n  } finally {\n    loader.style.visibility = 'hidden';\n  }\n});\n"],"names":["apiKey","currentPage","perPage","pixApi","data","searchParams","axios","error","setCurrentPage","page","getCurrentPage","lightbox","SimpleLightbox","renderImages","resultData","list","markup","largeImageURL","likes","comments","views","downloads","tags","webformatURL","form","input","loader","moreBtn","searchRemember","e","search","result","totalPages","iziToast"],"mappings":"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"}